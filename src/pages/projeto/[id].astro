---
import { ProjectDetailsWrapper } from "../../react/pages/ProjectDetailsWrapper";
import Layout from "../../layouts/Layout.astro";

export function getStaticPaths() {
  const projects = import.meta.glob("../../react/data/projects/*.tsx");

  if (!projects) {
    return [];
  }

  return Object.keys(projects).map((path) => {
    const id = path.split("/").pop()?.replace(".tsx", "");

    return { params: { id } };
  });
}
const { id } = Astro.params;
const isEmbed = Astro.url.searchParams.get("embed") ? true : false;
const currentPath = Astro.url.pathname;
---

<Layout>
  <ProjectDetailsWrapper id={id as string} currentPath={currentPath} isEmbed={isEmbed} client:only="react" />
</Layout>
